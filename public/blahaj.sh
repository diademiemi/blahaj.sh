#!/bin/bash
export SITE_URL=https://blahaj.sh
if [[ $TRANS == "RIGHTS" ]]; then BLUE="\033[0'30m\033[0'44m" PINK="\033[0'30m\033[0'45m" WHIT="\033[0'30m\033[0'47m"; printf "\033[0'30m\033[0'30m"; fi
printf "${BLUE}                                                                                                                                                        \033[0m\n"
printf "${BLUE}                                                                                  WX0kdc::l0                                                            \033[0m\n"
printf "${BLUE}                                                                               WXOxl:,''',c0                                                            \033[0m\n"
printf "${BLUE}                                                                             WXkoc::;'''':OW                                                            \033[0m\n"
printf "${BLUE}                                                                           WXOoc::;,,''':kW                                                             \033[0m\n"
printf "${BLUE}                                                                        WXOxoc:::;,'''',xW                                                              \033[0m\n"
printf "${BLUE}                                                                       WKdc;,,::;,,''''oN                                                               \033[0m\n"
printf "${BLUE}                                                                      NOo:;,;;;;;,'''':O                                                                \033[0m\n"
printf "${PINK}                                                                    WXkc;,,;;;;,,,,'''oX                                                                \033[0m\n"
printf "${PINK}                                                                   W0d:;,,,,,,,'''''',kW                                                                \033[0m\n"
printf "${PINK}                                                                  Nkc;,,,,;;;,,,''''':0                                                                 \033[0m\n"
printf "${PINK}                                                                 Xd:,,,;,,;;,,.......cX                                  WNNNW                          \033[0m\n"
printf "${PINK}                                                               WKo,'''',''''''.......oN                                 Nkccd0W                         \033[0m\n"
printf "${PINK}                                                             WXOo:;;;,'''''''''''''';O                                 WOc,,;cOW                        \033[0m\n"
printf "${PINK}                                           WWWWWWWWWWNNNXXKOkxollccc::;;;;;;;;,''''';OW                                Xd;,'',c0                        \033[0m\n"
printf "${PINK}                       WWWWNNNXXXXXXXXKKK00Okkkxddddoolllclccccc::;:cc::;;;,,,,,,'.',dN                                Kl;,''',dW                       \033[0m\n"
printf "${WHIT}               WWWNXXKK000OOkkkxxdoooooooollllcc:::::::::::::::::;;;:::;;,,,,,;;;;,,;cxXW                              Ko;,,,;;oX                       \033[0m\n"
printf "${WHIT}         WNXKK00OOkxxxxdddoodddollcccccccccccc::::::;;;;:;;;;;;;;;;;;;;;;,,,,,,,;;;;::cokXW                   NXN      Ko;;,,:cckW                      \033[0m\n"
printf "${WHIT}   WWNK0Okxdddddooollooollllllllllcccccccccc::::;:::;;;;;;;;;;;;;;;;;,;;,,,,,,,,,,,,;;:ccldk0XNW            WKo:dN     Ko;,'',:loOW                     \033[0m\n"
printf "${WHIT} WNK0Oxoodddooollcc:ccllooooollllllcccccccc:::::::::::::::;;;;;:;;,,,,,,,,,,,,,,,,,,,,,;;:::c:coxO0KNW     WKx:,'oN     Xd,..',;:cdKW                   \033[0m\n"
printf "${WHIT} Kdlcclllllccccccc::cllloollllllllcc:::ccc:::::::::::::::;;;,,;;;;,,,,,,,,,,,,,,,,,,,,;;;;;;c:;;::clodkOKK0d:'...oW     Wk;..,,,,;:d0W                  \033[0m\n"
printf "${WHIT} o,,,;cclc::::cccccclcclllllllccccc::::ccc:::::::::::::::;,,;;;;;;,,,,,,,,'''',,'''',,,,;,,;:;,,;;;:c:;;clcc:;,,,lOXNW  W0:..,,'',;;cd0XW               \033[0m\n"
printf "${WHIT} o,,,,;::::cc::::cccllccllllllllccc:::c:::::::::;;:::::::;;,,,,;;,,,,'''''''''''''''',,,,,,;;;,,,;;;::;,;::;;;;;:::lodxkOxc;,,,,'',,,;:okKNW            \033[0m\n"
printf "${WHIT} Kl,,;;::;;::;;:::clllllllllcccccc::::c:::::::;;;;::;;;;;;,,'',;;,'''''''''..'''''''''''',,,,,,,,,;,,;,,,,,,,,',;,;;;;;;;;:;;;;:;'.',,;:;:lxOKXNW       \033[0m\n"
printf "${WHIT} W0c,,;:;;:c;,;;;;:cllccccccccccc:::c::cc:;;;;,;,,;;;;;,,,,'''',,''''''......''''......'''''',,,',;,,;,;,''''..,,,,,,,',,;,,,,,;:,..''''''',;clldk0XW   \033[0m\n"
printf "${PINK}  W0o;,,,;:;,;;;:;:cccccccc::::cc:::::cc::;,'',;;,,;;;;,,,,,,''''''''...........'........'''',,,,,;;,;;:;..''....'','''',,,',;,,;;'.........',,,',;:oxK \033[0m\n"
printf "${PINK}   WX0dc;,;::;::;;;;;:;:c:'..,;,::::::::;,,'.':;'';;;;;,',,,,''''''''..........''..........',,,,,,,,,;;:,..',.....'''..''''';;;,;:,.................',o \033[0m\n"
printf "${PINK}     WNK0kxxdolc:;;;,,',;;...''.,;;;:;;;;''..;;'';:;;;;',;,,,'.'''''''''.......''.........'',,'',,,,,,;;....,..........'..'',;;,,:l:;;;,''''''',,;::ld0 \033[0m\n"
printf "${PINK}      WWWNNNNNXK0OOOkdoollc:::;;,,,,'',,,...,,'';;,,;;',;;,,,'.''''''...........'.........',,'''',,,,,,'....'.........''...',;:ld0NNNNNXKKKK00KKXNNWW   \033[0m\n"
printf "${PINK}         WNXXXXXKXNNXXXKKK0OOxdxxxdolc:;;,,,,'',;,,;;,,;,,;;,..'''.......''..............'',,'...,,...''.........'''',;:cldxOKNW                        \033[0m\n"
printf "${PINK}           WNXXNXKXXXXK0XK0KK0KXXKKKXK0OO0OOkxxdollc;,;,',;,'...........''''''...........',,'...''...'......''';:ldxO0KXNW                              \033[0m\n"
printf "${PINK}                NNNKKX00XOOXXOKXKKK000KKXXXXXXXXXNXKK0kxxddl;'............''''','',,;;::lodoc::;,..',;codxxkO00XNW                                      \033[0m\n"
printf "${PINK}                  WNXXKK000K0O0K00K00KXXXXXXXXXXXNXXXXXNNXNNx;''..............'',:lxOOOO00O0KXXK0OOO0XW                                                 \033[0m\n"
printf "${BLUE}                    WWNNNXXXXXXXXXKKXXKKKXXXXXXXXXXXXXXXXXNN0o;,,''...........''',,;cdOKXXNW                                                            \033[0m\n"
printf "${BLUE}                       WWWNNXXXXXKKKK0KXXXKKXXXXXXXXKKKKKKKKK0x:,,'''.......''''''''',:d0NWW                                                            \033[0m\n"
printf "${BLUE}                            WWWNXXKKKKXXXKKKXXKKKKKK00000000000Oxo:'....'.....'',''',,,,,:ldOKNW                                                        \033[0m\n"
printf "${BLUE}                                WNNNXXXXXXXXXXXXXNNXXXXXXXXNNNNWWWXOo;.........'''',,,,,,,,,,;codOKXN                                                   \033[0m\n"
printf "${BLUE}                                                                 WWWWN0dl:,........'''',,,,,''',;;::ckNW                                                \033[0m\n"
printf "${BLUE}                                                                        WNKkdol:,...................'oNW                                                \033[0m\n"
printf "${BLUE}                                                                            WWWNXOkxdlc:;,,'...',;clkN                                                  \033[0m\n"
printf "${BLUE}                                                                                                                                                        \033[0m\n"
printf "\033[0m"

printf "\nAvailable scripts:\n"

# Create pipe for bash to communicate with parent with
exec 5>&1

# I want to use a bash script for this
# But running this script with bash will declare all functions in scope to it's process only.
# So I have it pipe the names of the scripts to sh, which sources it. Sourcing doesn't fork.
script=$(bash -c '
scripts[1]="vagrant.sh: Vagrant related aliases and functions"
scripts[2]="kubectl.sh: Kubectl related aliases and functions"
scripts[3]="tools.sh: Useful functions and aliases"
scripts[4]="kde.sh: Functions and aliases for use with KDE software"

for key in ${!scripts[@]}; do
    printf "($key)  ${scripts[$key]}\n">&5
done

if [ -z "$1" ]; then
    printf "\nPlease select script(s) to run: " >&5
    read -r input
    selection=($(echo "$input" | tr "," "\n"))
else

    selection=($(echo "${@:1}" | tr "," "\n"))
fi

for key in ${!scripts[@]}; do
    for i in ${selection[@]}; do
        if [[ $i == $key ]] || [[ $selection == ${scripts[$key]} ]]; then
            script=$(echo ${scripts[$key]} | egrep -o "^[^:]+")
            echo "Running $script" >&5
            echo "${SITE_URL}/${script}"
        elif [[ $i == "all" ]]; then
            for key in ${!scripts[@]}; do
                script=$(echo ${scripts[$key]} | egrep -o "^[^:]+")
                echo "Running $script" >&5
                echo "${SITE_URL}/${script}"
            done
            exit 0
        fi
    done
done
')

# Source the scripts
for line in $(echo $script | sed 's/\n/ /'); do
    source <(curl -s $line)
done
